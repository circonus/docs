---
title: 2019-11-18
---

# Release Notes: 2019-11-18

[EL7 pinned
repo](https://login.circonus.com/resources/docs/inside/InstallCentos.html#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20191118/x86_64/`

## Operator Note

Circonus has transitioned check tags (those that are associated with an entire
check, rather than stream tags, which are associated with a single metric) from
being stored in the PostgreSQL database to being stored in IRONdb.

Operators are advised to run the following script from the system that serves
the "hub" role in your deployment:

```
/www/bin/checks/migrate_tags_to_snowth.pl
```

This will sync all existing check tags from PostgreSQL to IRONdb.
Depending on the number of checks and tags, this may take a while to run, so
using a terminal multiplexer such as tmux or screen is recommended.  It should
only be necessary to run this script once after updating to the 2019-05-06
release or later, but it will not hurt anything to run it more than once.

**As of the 2019-07-01 release, GoAPI no longer uses the PostgreSQL database
for metric searches, so it is necessary to run this script before updating to
the current release, if you have not already.**

## caql_broker

Version: 0.1.1573595963 (58ee39a)

* No user-facing changes.

## data_storage

Version: 0.1.1573658488 (506aa9c)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.
> We plan to remove these deprecated functions on 2020-01-31 for the SaaS site,
> and in the subsequent Inside release on 2020-02-10. This will affect
> CAQL checks as well as CAQL Datapoints on graphs. The UI will now show users
> a warning when one of the deprecated functions is used. Circonus offers a
> more powerful tag-search feature, exposed as `find()` in CAQL.

* CAQL: Improve performance of `window:`/`rolling:`/`aggregate:` functions in
  `#strict` mode.
* CAQL: Add `aggregate:*` package for controlling data aggregation on graphs.
* CAQL: `group_by`: Support grouping by multiple tags.
* CAQL: Performance improvements to `diff()`, `integrate()`, `delay()`,
  `is_missing()`.
* CAQL: Revise `delay()` function:
  * Allow multiple input slots
  * Improve performance
* CAQL: Add deprecation warnings to `histogram:window`/`histogram:rolling`; use
  `window:merge`/`rolling:merge` instead.
* CAQL: Revise the time aggregation functions `window:*` and `rolling:*`
  * Speedup processing by leveraging pre-aggregated data.
  * **[Breaking change]** By default the results of `window:*` functions no
    longer lag behind the incoming data when displayed on graphs. The old
    behaviour can be restored by passing align="end" as parameter.
  * Add support for multiple input streams.
  * Align window boundaries consistently.
  * Add `window:first()` function, which selects the first sample in each
    window.
  * Add `window:merge()` function, to aggregate histograms over time.
  * Add "skip" parameter to control the advancement of time windows.
  * Add "period" parameter to control the granularity of input data.
  * Add "align=start/end" parameter to control alignment of the output data.
  * Add "offset" parameter to control window offset against UTC.
* CAQL: Add `#strict` directive that emulates data processing in caql-broker.
* CAQL: Improve speed and accuracy of the `integrate()` function.
* Reconstitute: Fix potential null dereference/crash when iterating raw
  database.
* Reconstitute: Fix race/crash when deferring rollups.

## fault_detection

Version (faultd): 0.1.1572887856 (cb7f63e)

* No user-facing changes.

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/20181231#fault_detection)

## FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.12.0

* No changes since [2019-08-12](/circonus/on-premises/changelog/20190812#fq)

## GoAPI

Related roles: api, web_frontend

Version: 0.1.1572268435 (6059c21)

> The functionality to perform a Postgres-based, check UUID oriented search in
> metric search has been removed. This has been fully replaced by the more
> efficient and accurate search based on IRONdb tag search functionality.
>
> See the Operator Note at the top of this page for details on migrating check
> tags from Postgres to IRONdb. This is now required to be run in order for
> metric search results to work properly.

* No changes since [2019-11-04](/circonus/on-premises/changelog/20191104#goapi)

## Hooper

Version: 0.1.1572534736 (1cdc62c) (EL7, OmniOS)

Version: 0.1.1572534736 (5d4093e) (EL6)

* No changes since [2019-11-04](/circonus/on-premises/changelog/20191104#hooper)

## libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.2

* No changes since [2019-11-04](/circonus/on-premises/changelog/20191104#libmtev)

## notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/20191021#notification)

## Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1573224960 (149d692)

* (Broker) Limit the number of ICMP packets processed per eventer cycle to
  avoid stalls.

## Web UI/API

Version: 0.1.1573837387 (d129a9a)

* Bugfix: error in clone-ruleset when destination ruleset had a note.
* Bugfix: fixed dashboard widgets which were converted from Metric Clusters to
  saved metric searches, so they will activate properly when using saved metric
  searches.
* Bugfix: error in copy-check with clustered brokers.
* Bugfix: fixed the invitation response flow so that even though the signup
  page is gone, invitations can still be used to add team members.
* Dashboard bugfix: fix styling of gauge widgets in text mode so their text
  colors render correctly when viewed in black-dash mode.
* Dashboard Improvement: remove the dual add-widget modes to simplify the
  processing of adding widgets. Remove the click-to-select feature of grid
  cells in favor of the simpler draggable thumbnail method.
* Dashboard Improvement: don't close the widget utility panel when clicking
  anywhere else on the page.
* Updated Dashboard Widgets to no longer use Metric Clusters, since Metric
  Clusters are [deprecated](#data_storage). All widgets configured to use Metric
  Clusters now auto-convert to using saved metric searches when the Dashboard
  is opened.

## web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/20190909#web_stream)
