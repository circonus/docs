---
title: 2019-12-02
---

# Release Notes: 2019-12-02

[EL7 pinned
repo](https://login.circonus.com/resources/docs/inside/InstallCentos.html#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20191202/x86_64/`

## Operator Note

Circonus has transitioned check tags (those that are associated with an entire
check, rather than stream tags, which are associated with a single metric) from
being stored in the PostgreSQL database to being stored in IRONdb.

Operators are advised to run the following script from the system that serves
the "hub" role in your deployment:

```
/www/bin/checks/migrate_tags_to_snowth.pl
```

This will sync all existing check tags from PostgreSQL to IRONdb.
Depending on the number of checks and tags, this may take a while to run, so
using a terminal multiplexer such as tmux or screen is recommended.  It should
only be necessary to run this script once after updating to the 2019-05-06
release or later, but it will not hurt anything to run it more than once.

**As of the 2019-07-01 release, GoAPI no longer uses the PostgreSQL database
for metric searches, so it is necessary to run this script before updating to
the current release, if you have not already.**

## caql_broker

Version: 0.1.1573595963 (58ee39a)

* No changes since [2019-11-18](/circonus/on-premises/changelog/20191118#caql_broker)

## data_storage

Version: 0.1.1574371744 (1574ee5)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.
> We plan to remove these deprecated functions on 2020-01-31 for the SaaS site,
> and in the subsequent Inside release on 2020-02-10. This will affect
> CAQL checks as well as CAQL Datapoints on graphs. The UI will now show users
> a warning when one of the deprecated functions is used. Circonus offers a
> more powerful tag-search feature, exposed as `find()` in CAQL.

* Fix infinite loop when a `/fetch` request has exhausted its deadline and
  nodes are down.
* Fix bug in flatbuffer byte alignment.
* Support `count_only=1` for `find//tags`.
* Align and validate all surrogate flatbuffer data before attempting to use it.
  This will prevent using incorrect values and/or crashing on bad data.
* Fix bug with metric type changes using surrogate PUT REST API.
* CAQL: Fix a bug with handling missing data in `diff()`.

## fault_detection

Version (faultd): 0.1.1573691604 (688627a)

* No user-facing changes.

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/20181231#fault_detection)

## FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.12.0

* No changes since [2019-08-12](/circonus/on-premises/changelog/20190812#fq)

## GoAPI

Related roles: api, web_frontend

Version: 0.1.1574368914 (d2bb13a)

> The functionality to perform a Postgres-based, check UUID oriented search in
> metric search has been removed. This has been fully replaced by the more
> efficient and accurate search based on IRONdb tag search functionality.
>
> See the Operator Note at the top of this page for details on migrating check
> tags from Postgres to IRONdb. This is now required to be run in order for
> metric search results to work properly.

* Improvements have been made to the internal sqldb package to improve thread
  safety and performance of database operations.
* Bug: Fixes an issue that caused updates to contact groups to only save the
  last contact in lists of either the external or users contacts provided. It
  also corrects an error that prevented removal of all contacts from either the
  external or users contact lists for a contact group.
* Bug: Improves the IRONdb cluster service startup process so that spurious
  errors are not logged in Inside deployment environments.
* Bug: Fixes an issue that prevented metric search from working properly when
  the search contains an `__activity` tag category.
* Bug: Fixes an error that prevented metric searches from working properly when
  the activity start or end query parameters contained non-integer values.

## Hooper

Version: 0.1.1572534736 (1cdc62c) (EL7, OmniOS)

Version: 0.1.1572534736 (5d4093e) (EL6)

* No changes since [2019-11-04](/circonus/on-premises/changelog/20191104#hooper)

## libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.5

* Fix issue with logging threads not starting for "file" log types when
  daemonized.
* Fix issue with stderr log failing during daemonization.
* Update jquery to 3.4.1.
* lua: Fix `mtev.timezone():extract(...,"offset")` function
* Adopt aklomp/base64 implementation for better performance.
* Allow crash stacktraces to be redirected optionally onto different log
  outlet.
* Add `file_synch` log type.
* Allow FD-based log outlets (e.g. stderr) to be asynch and make them asynch by
  default, improving performance.
* Add `no_delay` listener option support. Default is `on`.
* Improve eventer performance (code optimization).

## notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/20191021#notification)

## Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1573917743 (d2eacec)

* No user-facing changes.

## Web UI/API

Version: 0.1.1574368417 (bb77079)

* Improvement: work around a Chrome bug when using the back button to return to
  the graph view page.
* Bug: browser would prompt about incomplete form on saving new ruleset. 
* Bug: error in clone-ruleset with patterns or Just Send Data checks.

## web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/20190909#web_stream)
