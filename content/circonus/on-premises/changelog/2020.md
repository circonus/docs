---
title: 2020
weight: 20
---

# Release Notes 2020

## 2020-07-27

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200727/x86_64/`

### caql_broker

Version: 0.1.1594921008 (db6e6bc)

* Convert check and filterset storage from XML to LMDB. This improves initial
  load times as well as configuration update times.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1595881924 (3430646)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Fix race condition in search index management.
* Various use-after-free fixes.
* Default timeout for `latency_sensitive` event loop increased to 10 seconds.
* Move parsing of raw data into separate jobq to process asynchronously.
* Update CAQL `search:metric:...()` to up-convert to a tag search and leverage
  the `find:...()` processing unit.
* Alter both `search:metric:...()` and `find:...()` to support external
  (out-of-band) expansion replacement. Within IRONdb, default both to internal
  index-based expansion. When not in IRONdb (CAQL-broker) maintain the
  pre-existing default (search: external, find: internal). Allow config-based
  override of these extra-IRONdb defaults.
* Add the `impl` keyword arg to both `search:metric:...()` and `find:...()` to
  allow statement-based selection of internal or external search expansion.

### fault_detection

Version (faultd): 0.1.1595266722 (dc5b850)

* No user-facing changes.

Version (ernie): 0.1.1593201733 (d1e0e7b)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2020-06-29](/circonus/on-premises/changelog/2020#2020-06-29)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.24

* Add support for authentication using LDAP cookies.

### Hooper

Version: 0.1.1595336617 (126e230)

* API: Fix regex match of origin URL in Apache configuration to allow for
  deployments where the URL host is the base site domain.
* Add optional top-level `site.json` attribute, `cookie_domain`. This is the
  domain name common to all client-facing endpoints, which will be used for
  session cookies. If absent, the `domain` value is used, and it is assumed
  that all endpoints are either the same as, or subdomains of, the site domain.
  This option may be useful if your web frontend and API hostnames are not both
  derived from the site domain. For example, if your web and API hosts are
  "circonus.example.com" and "circonusapi.example.com", respectively, then you
  would set `cookie_domain` to `example.com`.
* Add optional `site.json` attribute for the API role, `external_host`. This
  may be used in deployments where the client-facing API host does not follow
  the convention of `api.<site_domain>`. It is used by the web UI to construct
  requests from client browsers directly to the API for features such as metric
  name autocomplete in Metrics Explorer.
* Add hub cron job to gather product usage statistics on a monthly basis.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.12.5

* Fix bug in `mtev_plock_try_rtos` in `MTEV_PLOCK_HEAVY` mode where multiple
  threads could enter the S critical section.
* Support `-DMTEV_MEMORY_DEBUG` to track alloc/free stacks for
  `mtev_memory_safe` operations.
* Introduce new version global symbols to assist debuggers.
* Add `mtev_log_backtrace` that will print a previously captured backtrace.
* `MTEV_RDTSC_ENABLE` now replaces `MTEV_RDTSC_DISABLE` (defaults to off.)
* Add flexible conf interpolation system supporting `{{</*impl>:<fallback>:{<term*/>}}}`.
* Add a conf interpolation implementation for hwloc supporting numanodes, packages, cores, and pus.
* Add a conf interpolation implementation for ENV.

### notification

Version: 0.1.1594401421 (97de27d)

* No changes since [2020-07-13](/circonus/on-premises/changelog/2020#2020-07-13)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1594926202 (99f8170)

* No user-facing changes.

### Web UI/API

Version: 0.1.1595525197 (af3fac0)

* Bugfix: Do not deactivate checks when retiring a node from a broker cluster
  (unless it is the last one.)

### web_stream

Version: 0.1.1591797218 (3c0de1a)

* No changes since [2020-06-15](/circonus/on-premises/changelog/2020#2020-06-15)


## 2020-07-13

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200713/x86_64/`

### caql_broker

Version: 0.1.1593725670 (419b941)

* Adopt updated `noit_metric_director` API for registering interest in metric
  streams.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1594313779 (28acd7a)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Memory leak fixes.
* Add a header, `X-Snowth-Verify-Owner`, for all find calls that will verify
  that the node being queried owns the metric in question before reporting it.
  This will make counts more accurate on clusters where a rebalance has been
  performed and there are extraneous surrogate database entries on nodes.

### fault_detection

Version (faultd): 0.1.1593542161 (53ad2a2)

* No user-facing changes.

Version (ernie): 0.1.1593201733 (d1e0e7b)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2020-06-29](/circonus/on-premises/changelog/2020#2020-06-29)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.23

* Fixes a bug where metric searches for a term equivalent to a single forward
  slash were not being processed correctly.
* Modifies metric search so that base64-encoded terms are not decoded, but
  passed straight through to IRONdb.

### Hooper

Version: 0.1.1594230879 (e688475)

* Add on_first_install script to web_db initial setup.
* Sync `circonus.conf` template with recent changes in Circonus SaaS.
* Reorganize `circonus.conf` template to keep it sorted, making future audits
  easier.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.12.4

* Add `mtev_memory_regular_ck_malloc` for unsafe/regular memory allocations.

### notification

Version: 0.1.1594401421 (97de27d)

* Bugfix: added cleared_value macro (previously only had clear_value).
* Improvement: added `ruleset_notes` and `ruleset_link` macros.
* Bugfix: support numeric_max/min `rule_desc` macro expansion.
* Bugfix: switch from deleted `event_criteria_numeric` table to
  `event_criteria_lookup`.

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1593022540 (2254dfe)

* No changes since [2020-06-29](/circonus/on-premises/changelog/2020#2020-06-29)

### Web UI/API

Version: 0.1.1594402895 (e1dd82d)

* Improvement: internal cleanup of rule_set storage and indexing.

### web_stream

Version: 0.1.1591797218 (3c0de1a)

* No changes since [2020-06-15](/circonus/on-premises/changelog/2020#2020-06-15)


## 2020-06-29

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200629/x86_64/`

### caql_broker

Version: 0.1.1593022540 (07bbb3a)

* No user-facing changes.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1593189054 (bb85dcd)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Fix bug causing crashes when resuming a reconstitute and the
  `debug/surr_load` debug log is enabled.
* Remove the concept of source/category and check_name. These were metadata
  recorded in the surrogate database, and used only for Graphite searching.
  Their removal reduces complexity and saves memory, while Graphite search
  compatility is preserved through other means. **This change modifies the
  content of replicated surrogate data, which will cause an increase in
  surrogate update activity on nodes that have not yet been upgraded. Operators
  are advised to complete a rolling upgrade as quickly as possible to minimize
  potential disruptions.**

### fault_detection

Version (faultd): 0.1.1593025381 (72ec5dc)

* Auto-cull cleared rule streams for patterned-based rules.
* Cull on clear (API and AMQP).
* Change internal absence triggering to use `METRIC_ABSENT` to differentiate
  from a value-present-but-null.
* Change `windowing_min_duration` to default to 0.
* Adopt new `noit_metric_director` APIs to delegate matching.
* Use miss cache for better performance.

Version (ernie): 0.1.1593201733 (d1e0e7b)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* Configuration changes in PostgreSQL queries run at startup. Has no effect for
  Inside deployments since Ernie no longer does fault detection. The update is
  being done for consistency.

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.21

* Fixes a memory leak in the GoAPI logging package that was leading to periodic
  out-of-memory crashes.
* A new field has been added to data results returned by the `/metric`
  endpoint. The `_display_name` field contains the display name of the check
  which collects the metric described in the results.
* Internal logger will now submit log entry data to fq if configured.
* The check ID data cache will now only automatically update data for active
  checks, improviding query efficiency.
* No longer returns a 500 error if IRONdb fetch or caql data results contain
  `inf` or `NaN` data values. It will still log the event as a warning.

### Hooper

Version: 0.1.1593436753 (1f1ceee)

* (data_storage) No longer need to explicitly install/update jemalloc, as it is
  now directly depended upon by the snowth package.
* (web_frontend) Use only the site domain value for `Web::CookieDomain` in
  `/www/etc/circonus.conf`. If the optional `url_host` attribute is in use,
  operators are advised to have users log out and clear their browser cookies,
  then log back in.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.12.3

* Various fixes from Coverity static analysis.
* Support the new `MLKV()` macro instead of the `MLKV{}` mistake if
  `MTEV_USE_MLKV_2` is defined. This will become the default in the next major
  release and users can get their code ready now by adding `-DMTEV_USE_MLKV_2`
  to their `CPPFLAGS`. This is not ABI breaking, but the next major release
  will break the ABI such that C++ can be supported.
* Fix string-matching in `mtev_logic`.
* Add functional probability for `mtev_frrh` via `mtev_frrh_set_prob_function`.
* Remove `noitedit/strlcpy.h` header and provide that via `mtev_str.h`.
* Add `mtev_strlcpy` and `mtev_strlcat`.
* Runtime detection of ASAN to avoid `stack-buffer-underflow` failures when
  apps use ACO (runtime avoids memcpy for stack replacement).
* Allow basic use of logging immediately at application start (before init).
* Add `mtev_log_hexdump_ex`.
* Add documentation for the logging facilities.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1593022540 (2254dfe)

* (libnoit) Performance and thread-safety fixes to `noit_metric_director`.
* Support base64-encoded histograms as string values, e.g.:
  ```
  { "metric": { "_type": "[hH]", "_value": "<b64encoded hist>" } }
  ```

### Web UI/API

Version: 0.1.1593203059 (ef7d482)

* Fixed graph rendering bug: when viewing high-resolution (typically sub-1m
  period) data, gaps in the data were not rendered as wide as they should have
  been.
* `windowing_min_duration` has been added to the RuleSet API as a new field for
  numeric rulesets. This is the minimum amount of time a windowing method must
  collect before it is evaluated for the purpose of alerting.
* Ruleset support for metric_name + filter combinations for matching with tag
  filters on a specific metric name over one or more checks.
* New simplified Ruleset creation modal.

### web_stream

Version: 0.1.1591797218 (3c0de1a)

* No changes since [2020-06-15](/circonus/on-premises/changelog/2020#2020-06-15)


## 2020-06-15

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200615/x86_64/`

### caql_broker

Version: 0.1.1591810140 (84eef8c)

* Fix: Only keep compiled CAQL statements in the register. When using disabled
  tag_search, we were keeping half-initialized search objects around.
  Subsequent `pull()` calls were failing on them.
* Enable mtev log stats for error/notice/warn.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1591905048 (97b8283)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Remove source and check name from graphite tree.
* Replace check name with explicitly configured aliases.
* Implement on-disk persisted ART maps for tag search (improve boot-time index
  construction by up to 100%)
* Fix stuck `set-crdt` (metadata) replication to third-parties: automatic feed
  (jlog) repair when corruption is detected.
* Fix possible memcmp crash when surrogate keys are smaller than `uint64_t` in
  size.

### fault_detection

Version (faultd): 0.1.1591214787 (4d1c531)

* Allow null text values to update rule states.

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.19

* Allow alert searches to return inactive alerts only when the search contains
  the term (active:false) or (active:0).
* Incorporates all of the documented search terms supported for alerts.
* Fixes an issue that could cause problems parsing V2 search queries.
* Adds a `ruleset_pattern` search term to `/alert` searches.

### Hooper

Version: 0.1.1591907623 (f3b4eaa)

* Remove the search-only GoAPI instance from `web_frontend` nodes. Searching
  will now be performed directly against API hosts.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.12.0

* Fix more json-lib brokeness (bad pointers).
* Only install public `mtev_json` headers.
* Fix an issue where valid SSL connections that do not handshake in one
  non-blocking action would register a spurious certificate error.
* Inform lua bindings of TLS1.3.
* Change `mtev_plock` atomic mode to `pause` instead of `repnop` for stall.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1591810140 (1a0ba6b)

* Adopt libmtev public JSON APIs.
* Broker: Update default CA trust store file. Some newer root certificate
  chains were not being recognized, leading to spurious validation errors.
* Crash fixes related to thread safety.

### Web UI/API

Version: 0.1.1591995987 (67e3bdf)

* Fixed security vulnerability: Prevent XSS being passed to the Integrations
  Module page via the type parameter.
* Fixed default metric type on the Metric Details page (so if a metric has its
  type changed, it will default to the latest type).
* **Deprecated manual histogram collection toggling on static metrics. It will
  be unavailable for Checks and Accounts created on or after 2020-07-01.**
* Fixed histogram collection toggling on static metrics (on the Check Details
  page).
* Renamed Account Profile to Account Settings.
* **Deprecated Worksheets and hid the Worksheets menu item on accounts which
  don't have any Worksheets.**
* Removed the Tags page from the UI.
* Fixed security vulnerability: Prevent XSS being passed in as pagination
  parameters.
* When listing static check metrics on the Check Details page, list them
  alphabetically, with the disabled metrics at the bottom.
* When listing static check metrics on the Check Details page, don't use
  placeholder values which cause the metric type to not be detected properly.
* Fixed security vulnerability: Prevent XSS coming from modified page URLs
  being output unencoded.

### web_stream

Version: 0.1.1591797218 (3c0de1a)

* Correct some `mtev_json` usage.


## 2020-06-01

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200601/x86_64/`

### caql_broker

Version: 0.1.1590667248 (f4a03a2)

* Optional config variable to disable tag_search completely.
* Add configurable queue-size limit to metric_director. Incoming messages will
  be dropped when the queue is full.
* Add `caql-broker-start` script for managed startup.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1590590608 (494fa3c)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Load libmtev ptrace modules for better-annotated crash reporting.
* Change the `/find//active_count` API to use the `count_only` methodology from
  `find` which is faster and more memory efficient, but yields estimates when
  nodes are down.
* Support `__type:(numeric|histogram|text)` in tag searching. Does not support
  pattern matching.
* Add optional `lmdb_flags` attribute to `nntbs` and `metadata` nodes in config
  to allow for better control. Change to drop `MDB_NOMEMINIT` by default as the
  performance implications aren't significant. Drop `MDB_NOSYNC` from the
  default metadata flags.
* Allow nntbs timeshards to recover when bad data is encountered and add
  `.db.nntbs.errors (errors|ST[db-type:nntbs,...])` statistic.
* Move module initialization startup messages out of the error log and into the
  startup log.

### fault_detection

Version (faultd): 0.1.1590695961 (0b8b8e1)

* Fix incorrect assessment of parent rulesets sev 1 state.

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.17

* No changes since [2020-05-18](/circonus/on-premises/changelog/2020#2020-05-18)

### Hooper

Version: 0.1.1590068866 (07c29e4)

* Integration of tooling to help assess customer experience for on-premises
  deployments.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.11.2

* Fix race condition that can cause dead events at boot.
* Fix crashes by correctly using SMR in `http_observer`.
* Ship builtin 1024 and 2048 DH params for older OpenSSL.
* Eventer and HTTP improvements:
  * Add `eventer_ssl_ctx_new_ex` which takes a `mtev_hash_table` as a more
    future-proof parameterization.
  * Support for inlining key/cert/ca in config (alternative to file path)
  * `sslconfig` changes:
    * `certificate` as `certificate_file`
    * `key` as `key_file`
    * `ca_verify` as `ca_chain`
    * Add `ca_accept` (for advertising acceptable CA signers to clients)
    * Add `dhparam_bits` for forcing a DH parameter bit length (0 disables)
  * Update `ssl_dhparams` eventer options to use NIST defaults when omitted or
    left blank.
  * Improve readability of SSL/crypto error messages.
  * NPN upgrades could reference a stale context resulting in crashes.
  * Fix multi-protocol NPN/ALPN negotiations.
  * Provide helpers to make it so we can more easily register new ALPN keys.
  * Allow ssl contexts to override/add ALPN keys.
  * Have the libmtev http1 implementation advertise `HTTP/1.1` over ALPN.
  * More robust HTTP testing, including intermediate cert chains.
  * HTTP/2 no long performs unsolicited compression, to appease curl.
* Allow header inclusion from C++.
* Update lua ssl bindings to support extensible context creation.
* Update mtev.exec (and this mtev.sh) lua to accept environment that is a
  `key,value` table instead of just an array of `key=value` strings.
* luamtev improvements:
  * Make luamtev print default to stdout instead of stderr.
  * Fix non-tty input when in interactive mode.
  * Fix `-e` flag for running methods other than main.
  * Add `-h` flag for help with a clean exit code.
* Fix eventer JSON output to include timers.
* Tolerate `EPERM` in `epoll_ctl` adding (so adding `/dev/null` doesn't
  assert).
* New ptrace module that enumerates HTTP requests when using `http_observer`.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1590613152 (a153713)

* Broker: Fix race in check recycle bin, whereby a check that is being restored
  could wind up being deleted instead.
* Broker: Add `filters/show` REST endpoint for getting filterset information.
* Separate counts of dropped messages in `noit_metric_director` to distinguish
  between those that arrived too late from those dropped because the queue was
  full.
  ```
  dropped|ST[app:noit,reason:too_full,subsystem:metric_director,units:messages]
  dropped|ST[app:noit,reason:too_late,subsystem:metric_director,units:messages]
  ```
* Support a limit for queue backlogs.

### Web UI/API

Version: 0.1.1590764539 (f56c57a)

* Bugfix: Fix RuleSet dependency modal so that it doesn't clip the autocomplete
  dropdown.
* **The Metrics Explorer interface is all new! Now it contains a query builder to
  help users find metrics easier, without needing to understand our search
  syntax.**
* Bugfix: API validation error with rule_set parent=null.
* The Kubernetes automatic dashboards now have a bread crumb navigation bar at
  the top to make it easier to add and remove filters.
* The `/maintenance` API endpoint will now be handled by GoAPI for all
  installations.
* Bugfix: API would deny fetch of `/broker/ID` endpoint to shared account.

### web_stream

Version: 0.1.1588616219 (65d35fd)

* No changes since [2020-05-18](/circonus/on-premises/changelog/2020#2020-05-18)


## 2020-05-18

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200518/x86_64/`

### caql_broker

Version: 0.1.1589293899 (7a5e664)

* No user-facing changes.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1589443427 (7e9056f)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* No user-facing changes.

### fault_detection

Version (faultd): 0.1.1588711075 (e4fa0c9)

* No user-facing changes.

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.17

* Added the `X-Snowth-Advisory-Limit` header to the allowed headers for the
  IRONdb proxy service.
* Fix: Fixes a bug that would prevent check service data checks from being able
  to identify a check if it had been created since the last cache refresh.
* Fix: Corrects a bug affecting filter searching for maintenance windows.
* Adds the ability to filter and search maintenance windows based on start and
  stop time and active status.
* Fix: Fixes a problem which could cause failures and HTTP 500 errors when
  searching for maintenance windows using certain search terms.
* Fix: Fixes a problem with the format of the data in the item field in values
  returned by or sent to the `/maintenance` endpoints.
* Fix: Corrects a problem that could cause the GoAPI process to hang during
  graceful server shutdown.
* All log entries generated within the span of any request will contain a
  unique trace_id value for that request. This should make it easier to
  associate all log entries related to an individual request.
* Fix: Corrects a formatting issue with the `/caql` endpoint default data
  response.
* Fix: Corrects a bug that could cause process crashes when handing POST
  requests to the soon-to-be-deprecated `/metric_cluster` endpoint.

### Hooper

Version: 0.1.1588734490 (4023be3)

* Add an exclusion to the log pruning script to skip stratcon jlog directories.
  These are not disposable logs.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.10.8

* Fix NPE when freeing a broken SSL context.
* The `/cluster` PUT endpoint will now synchronously write the configuration to
  storage if the "x-mtev-conf-synch" header is present and set to "1".
* Revert a behavior change in jobqs introduced in 1.10.3.
* Further optimize `mtev_log` filtering.
* Logic optimizations and string slices.
* Logging optimizations: avoid allocations in some cases, and filter prior to
  Flatbuffer serialization.
* Fix non-string matching in log filtering.
* Fix short allocation in filter parsing.
* Expose log volume statistics as metrics in mtev/stats for configured outlets.
* Fix thread naming in `fq` module.
* Add `fanout` and `fanout_pool` config options in `fq` module.
* Assist subroutine name lookups with libunwind (for crash dumps).
* Change `MTEV_DWARF` to default to 0, enable by setting to non zero value.
* Add support for environment variable replacement in config values:
  `ENV:fallback:{ENVKEY}`

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1589321339 (6478478)

* Broker: Some applications that emit statsd metrics omit the trailing
  line-feed, and the statsd module was unconditionally skipping over the last
  character, leading to erroneous tag values.

### Web UI/API

Version: 0.1.1589813998 (a392058)

* Fix: When viewing Rulesets through a check UUID+metric name URL instead of
  the standard URL, you are now rerouted properly instead of being shown an
  empty ruleset.
* `metric_tags` (not to be confused with metric StreamTags or check-tags) have
  been deprecated for a long time. Support for these in the product have now
  been removed, as have the associated Postgres functions/tables for keeping
  them in sync.

### web_stream

Version: 0.1.1588616219 (65d35fd)

* No user-facing changes.


## 2020-05-04

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200504/x86_64/`

### caql_broker

Version: 0.1.1587744126 (7a5e664)

* Sweep tag-search cache regularly.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1588351051 (b79bc31)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Fix bug where we would attempt to abort LMDB transaction after failed
  commits, which can cause double frees.
* CAQL: Add package `filter:*`.
* Lua: Fix a bug where partially-initialized lua extensions were kept around.

### fault_detection

Version (faultd): 0.1.1588034330 (6f9e5ef)

* Enhancements to debug logging.

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.7

* Fix: Allows a value of null to be used for the contact_group escalations
  field. This is treated equivalently to omitting the field.
* Fix: If an attempt to delete an invalid or inaccessible contact group ID is
  made, the correct error will now be returned, not a false indication of a
  successful deletion.
* The field `name` is now a required field for `contact_group` types. It is now
  an error to set `name` to an empty or null value.
* Styling updates for internal documentation.

### Hooper

Version: 0.1.1588275656 (1c57d1c)

* Remove `bert-irc-bot` service. The IRC notification method has not been
  supported for some time.
* Restart the GoAPI service when `circonus.conf` is updated.
* Remove `web_db` items from Stratcon's configuration. It does not make use of
  the Postgres database.
* Configure all MQ hosts for `caql_broker`. Previously only the first MQ host
  was used, but this can cause issues if Stratcon is configured to round-robin
  over available MQ nodes.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.10.4

* Fix use-after-free race in `http_observer` module.
* Allow null strings in `mtev_log` KV metadata.
* Fix metadata reporting in consul module.
* Add metadata in http logging.
* Implement filtering logic for log outlets.
* Update mtevEL to support new types.
* Require -std=c11 (use of `_Generic`)

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1587744126 (8373e31)

* Clustering: Fetch checks and filtersets in batches (default 500).
* Fix null-pointer exception in websocket handler.

### Web UI/API

Version: 0.1.1588348430 (4982101)

* Bugfix: Ruleset Group page would fail intermittently in some installations.
* Improvement: API support for numeric CID as rule_set parent attribute.
* Improvement: When editing a graph, the graph config will load immediately to
  allow editing of the graph without needing to wait for the data to load.

### web_stream

Version: 0.1.1587405457 (2e34540)

* Fix null-pointer dereference in FQ message handling.


## 2020-04-20

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200420/x86_64/`

### caql_broker

Version: 0.1.1587054536 (69ce22d)

* Add tag-search result caching.
* Performance improvements to message handling.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1587050127 (3af5a96)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* CAQL: Validate UUIDs passed to `metric:*` functions.
* [raw ingestor] Lower default timeout/connect timeout for sending data to the
  snowth cluster from 60s/2.5s to 8s/1s. This helps avoid backlogs when an
  IRONdb node is responding slowly to ingestion.

### fault_detection

Version (faultd): 0.1.1586976934 (78b9ee0)

* Fix numeric windows for patterns against all checks.

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.4

* Improvements to memory utilization for resources shared between API and proxy
  servers.
* Fix: Improve validation error messages, on multiple endpoints, that were
  confusing because they were being wrapped inside JSON decoding error
  messages.
* Improvements to the clarity of error messages returned by the `/data`
  endpoint when required query parameters are missing or out of range.
* Include a tag containing authentication information in the GoAPI
  documentation.
* Fix: Metric search pagination no longer returns an incorrect total count.
* When annotations are created or modified, a check will be performed to verify
  that any provided related metrics actually exist.
* Validation has been improved for start and stop time fields for requests
  placed to the `/annotation` endpoint.
* Fix: Correct a problem where a successful annotation DELETE request would
  return a 404 error code, even though the delete was successful.
* Fix: If an account timezone is set to a non-null but empty string, the API
  will now correctly return a validation error.

### Hooper

Version: 0.1.1586979176 (0c21e73)

* Expose configuration for NNTBS timeshard retention. This is only valid for
  deployments using the "nntbs" [backing store](/circonus/on-premises/installation/installation/#data_storage-attributes)
  for the `data_storage` role.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.10.2

* No changes since [2020-04-06](/circonus/on-premises/changelog/2020#2020-04-06)

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1586978979 (abda83c)

* (Broker) Remove the C-based ssh2 check module. It was replaced with a Lua
  version in 2018; this is just cleanup and removal of an external library
  dependency.
* (Broker) Drop outdated and unused modules: googleanalytics, keynote, and
  keynote_pulse.

### Web UI/API

Version: 0.1.1587421536 (3df9624)

* Bugfix: API was unable to set `prefer_reverse_connection=0` in the PUT
  provision_broker call.
* Bugfix: enterprise broker reachability UI notifications were being missed.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)


## 2020-04-06

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200406/x86_64/`

**Note: This is the final release that will be supported for the EL6 and
OmniOS platforms.**

### caql_broker

Version: 0.1.1585256488 (a56f6fd)

* Rework statement initialization to avoid double-registrations of checks at
  startup.
* Emit metadata for CAQL `find()` results, and consistent ordering for `find()`
  results.
* Allow dynamic numbers of check outputs.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1585928544 (ef8b888)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* Fix null-pointer exception crash on absent metric locator during `/find`.
* Improved performance of metric search indices, reducing initial start time
  and speeding tag searches where the category has wildcards, e.g.,
  `and(version-*:v1.*)`.
* Implement a variety of text-based `/fetch` transforms for counts and rates.

### fault_detection

Version (faultd): 0.1.1584040940 (88ae70a)

* No changes since [2020-03-23](/circonus/on-premises/changelog/2020#2020-03-23)

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.7.2

* add: A new metric search endpoint has been added to accept metric seaches via
  POST requests. All search parameters in the query string of a GET metric
  search request can be included in a JSON object in the body of the POST
  request.
* fix: Cleans up the error message returned when POST or PUT requests to the
  `/acknowledgement` endpoint contain JSON errors, or data that does not
  validate.
* fix: Improves validation of account country code values and fixes an issue
  causing a status code 500 error to be returned if an invalid country code is
  set using the `/account` endpoint.
* fix: Metric search requests which find no results no longer return a 404
  error and instead return an empty result set `[]`.
* fix: Unauthorized PUT requests to the `/account` endpoint no longer return
  the wrong HTTP status code.
* fix: Additional validation takes place on contact group adds/updates for
  pagerduty, opsgenie, victorops, and slack contact groups. These tests prevent
  certain errors from occurring in Bert or other messaging services.
* fix: Empty results are no longer be returned by `/data/fetch` requests when
  the request is for the highcharts data format and includes a reduce
  operation.
* fix: Empty tags values will no longer be returned as null in some objects.
  All objects will now consistently return an empty array `[]` when there is no
  data for the tags field.
* fix: Search query parameters for all endpoints will no longer return an error
  if a numeric query parameter is provided but is an empty value.

### Hooper

Version: 0.1.1586206581 (fe1b966) (EL7, OmniOS)

Version: 0.1.1585315278 (c63b6a8) (EL6)

* (EL7/OmniOS only) `snowth.conf` changes:
  * Add a rollup-suppression tag search filter to the raw database. Any metrics
    having a stream tag of `__rollup:false` will not be rolled up, and will
    disappear from the raw database as time shards are deleted.
  * Turn on `accept_thread` and `fanout` for the 8112 listener. The former
    dedicates a thread to handling new connections, and the latter fans out
    events from accepted connections across threads in the default eventer
    pool. These improve performance.
  * Add a log of RocksDB activity, level "warn" and higher. This will capture
    statistics on compaction, among others. It rotates on file size and will
    not occupy more than 100 MB of total disk space.
  * Explicitly note the surrogate database attribues `cache_init_size` and
    `activity_tracking`, using the in-code default values.
* Remove extraneous blank lines from the `stratcon.conf` template. When the
  application updates its config, these lines are not present, so avoid
  putting them back when Hooper runs.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.10.2

* Fix thread-safey issue using XPath within `mtev_conf`.
* Fix `mtev.uname` on Solaris/illumos.
* Fix missed http/1 request count increment.
* Include `-lssl` in `mtev_lua/mtev.so`.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1585237221 (84fbfd8)

* Fix xpath for global check parameter overrides.
* Accommodate double firing of dns check timeout events (crash fix).
* Change config lock type from write to read for cluster filter changes.
* (CAQL Broker) Expose check tags to Lua.
* Delay check/filterset replication until initialization is complete (crash
  fix).
* Delay setting of global cluster identity until check configuration read is
  complete.

### Web UI/API

Version: 0.1.1585872178 (8f1cba3)

* New Feature: API provision_broker support for assert_status and cluster_name.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)


## 2020-03-23

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200323/x86_64/`

### caql_broker

Version: 0.1.1584715301 (92fcf48)

* No user-facing changes.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1584542652 (8dbe49b)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* CAQL: Remove 1y limitation on maximum request span. This limit was added to
  prevent heavy CAQL queries from overloading the system. There are now
  limits on the total number of samples fetched, and timeouts on key
  operations.
* CAQL: Improve performance of all binary operators, by defaulting to
  approximate processing.
* [raw ingestor] Add a `force_jlog` field that will force brokers go through
  jlog, if configured to.

### fault_detection

Version (faultd): 0.1.1584040940 (88ae70a)

* No user-facing changes.

Version (ernie): 0.1.1544639627 (db11a23)

**Composite Checks Removal Notice**

Since the [2019-05-06
release](/circonus/on-premises/changelog/2019#2019-05-06), the `circonus-ernie`
service has remained, serving its secondary role as a broker for [Composite
checks](/circonus/checks/check-types/composite/). This functionality has been
replaced and extended by [CAQL
checks](/circonus/checks/check-types/caql-check/). The Composite check type,
and the supporting service, will be removed in a future release. Operators and
users of composite checks should immediately begin converting to CAQL checks.
Please contact Circonus Support (support@circonus.com) with any questions.

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.6.12

* fix: Issue causing some cache misses not to be recorded correctly.
* fix: Error causing contact group and metric cluster delete requests to always
  return not found errors has been fixed.
* fix: All endpoints that accept JSON data in the request body will now return
  more descriptive errors with the correct HTTP code if the JSON is invalid.
* fix: Improved validation when saving contact group data via the API. The API
  will now check and return errors if contact group type and contact methods
  are mismatched.
* fix: Parsing error that occured during metric by ID lookup with metric name
  containing certain special characters has been corrected.
* fix: Results from the `/acknowledgement` endpoint will always include the
  `notes` and other fields even when they contain no data. Now, they will be
  included with a value of `null`.
* fix: Results from the `/alert` endpoint will always contain the `_cleared_on`
  and `_acknowledgement` fields. Even if they are empty, they will now still be
  included in the results with a value of `null`.
* upd: Changes the auth service process used for token based authentication to
  not use caching by default. Auth token caching can be re-activated with an
  environment variable setting.
* fix: multiple instances where 500 errors were being returned have been fixed
  to return the correct 4XX errors and messaging.
* fix: when using token auth, if either the token or app name header is
  missing, the error code returned will be 401, previously it was incorrectly
  returning code 403 if only one of the headers was missing.
* fix: all endpoints that were returning 404 errors when performing a search
  operation that finds no results will now return `[]` instead of the error.
* fix: bug causing some tag searches for acknowledgement values to fail with a
  non-descriptive 500 error.
* fix: issue resulting in pending auth token application statuses being cached
  and not being correctly updated when the associated application is approved.
* fix: issue causing account/current not to report errors correctly when
  retrieving some types of account data.
* add: new `share_id` parameter supported by the `/data/fetch` and `/caql`
  endpoints. This allows these API endpoints to be used to fetch data for
  shared dashboards, graphs, and worksheets.
* add: new "victorops" contact method supported in the "contact_info" values
  returned by calls to the /user API endpoint. It contains the same VictorOps
  ID that is shown in the User Profile of the UI.

### Hooper

Version: 0.1.1584478659 (062dd79) (EL7, OmniOS)

Version: 0.1.1584537406 (b252290) (EL6)

* Facilitate CAQL debugging.
  * Populate the `Snowth::Override` configurations in `circonus.conf`,
    permitting a user to set a UI preference forcing all browser requests to a
    single IRONdb node.
  * Configure the Lua request log on all `data_storage` nodes. This log is
    written to `/snowth/logs/luarequestlog` and will capture details of CAQL
    requests.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.10.1

* Don't truncate SSL errors in logs.
* Add `mtev.get_ipv4` and `mtev.uname` lua functions.
* Add `mtev.reverse_details` lua function to monitor reverse connections.
* Deprecate `mtev_conf_{get,release}_section{,s}` and add `_read` and `_write`
  variants to allow concurrent configuration access.
* Fix crash when HTTP/2 fails to setup upon connection.
* Add cross-thread lua support for serialized waitfor/notify.
* Add jlog log configs: `segment_size` and `precommit`.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1584631919 (2fad75d)

* (Broker) Decouple XML culling from check deactivation. This should solve
  issues where removing large numbers of checks performs too much work with the
  master poller lock held.
* Adopt new `mtev_conf_*` section APIs.
* (Broker) Support tagged stats in the broker(selfcheck) module.
* (Broker) Make thread pool selection hierarchical and unify logic. We already
  had check-based thread selection; this expands that to allow for check-based,
  module-based, and module-name-based logic. The `ping_icmp`, `graphite`, and
  `prometheus` checks are updated to use this shared logic.
* Fix crash in socket listener when encoutering an incomplete buffer.
* (Stratcon) Add statistics related to broker jlog feed processing.
* (Broker) Add locking for safety in mtev_hash manipulation by socket
  listeners.
* (Broker) Fix crashes and multi-thread listener. The listener and handler
  shared the same describe function which was incorrect as their closure types
  are different. The opentsdb and graphite modules both registered
  (conflicting) names for the same callback -- wrap them so this isn't an
  issue. Lookup a pool by module name and balance new connections across the
  threads in that pool.

### Web UI/API

Version: 0.1.1584651786 (5992246)

* New Feature: Adds the `/docs` endpoint to GoAPI forwarding to allow public
  access to the GoAPI documentation. Accessible at `https://<api_url_host>/docs`,
  e.g., https://api.circonus.com/docs .
* Bugfix: fix bug preventing the addition of metrics to graphs with the default
  numeric type.
* New Feature: Dark Theme for the entire user interface. By default, it will
  follow your OS or browser preference, but you may set it explicitly under
  User Preferences.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)


## 2020-03-09

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200309/x86_64/`

### caql_broker

Version: 0.1.1583507886 (31f2298)

* Add debugging tools: fqaudit and caql-broker.sh library

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1583366271 (4c6a0a8)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* raw ingestor: Add jlog error count to stats so operators can see if a jlog
  has been corrupted.
* raw ingestor: Expose space usage statistics.
* CAQL: Improve `fill()` performance.
* CAQL: Improve `window:sum()` performance.
* Fix `/fetch` histogram transforms.

### fault_detection

Version (faultd): 0.1.1582567726 (070c631)

* No user-facing changes

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.6.8

* No changes since [2020-02-24](/circonus/on-premises/changelog/2020#2020-02-24)

### Hooper

Version: 0.1.1583173745 (ba69445) (EL7, OmniOS)

Version: 0.1.1583173709 (c34b44d) (EL6)

* web_frontend: Update CSS/JS bundles in `circonus.conf`.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.12

* Expose counter stats for http[12] requests and responses.
* Support managed applications (service restarting of arbitrary sidecars)
* Make dropping privileges a noop instead of an error when the the process is
  already running as the requested user/group.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1583515571 (006e2fd)

* Packaging: the broker's `jezebel` service is removed, and the jezebel process
  is now directly spawned/managed by `noitd`. Going forward, operators need
  only be concerned with the `noitd` service.
* Extend metric/filterset buffer lengths.
* Broker: implement `graphite_pickle` module.
* Broker: fix startup speed for large configs.
  * Improve check-to-thread distribution.
  * Cache the common `mtev.conf_get_string` calls in modules.
* libnoit: add instrumentation to `noit_metric_director`.

### Web UI/API

Version: 0.1.1583528882 (697a19a)

* Bugfix: API would not allow `provision_broker` with account token.
* New Feature: Add UI support for the new Graphite (Pickle) module and unified
  all Graphite modules under a single display.
* New Feature: Histogram datapoints on graphs now have a "value type" field
  which allows them to be plotted as a rate instead of as a heatmap.
* New Feature: Enabled metric filtering by stream tag query for checks using
  allow/deny metric filters.
* Bugfix: Removing parent from rule_set via API with `"parent":null` was not
  working.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)


## 2020-02-24

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200224/x86_64/`

### caql_broker

Version: 0.1.1582119106 (b37f6c4)

* No user-facing changes.

### data_storage

Related roles: caql_broker, fault_detection, stratcon

Version: 0.1.1582269016 (3f76f8b)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* CAQL: Add `coalesce()` function.
* (Stratcon) Fix potential crash that can occur when two or more nodes in an
  IRONdb cluster are down. Issue was caused by concurrent writes to a hash
  table.
* (Stratcon) Fix potential infinite recursion bug that could cause crashes if
  stratcond is unable to write to any node in the IRONdb cluster for an
  extended period of time.
* Implement rate transform on histograms in the `/fetch` endpoint.
* Make existing stddev and average transforms work for histograms in `/fetch`.
* Make existing mean transform work for numerics in `/fetch`.

### fault_detection

Version (faultd): 0.1.1581526619 (4c52760)

* Relocate faultd config files to `/opt/circonus/etc/fault/` directory.
* Expose `/config/` via REST

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* No changes since [2020-02-10](/circonus/on-premises/changelog/2020#2020-02-10)

### GoAPI

Related roles: api, web_frontend

Version: 0.6.8

* Note: GoAPI is now packaged and released according to its internal semantic
  version.
* Return CAQL `explain` metadata from IRONdb when requested.
* Fix: remove deprecated `metrics_time_to_live` db field from `/account`
  endpoint.
* Fix: remove references to `users.language` db field from `/user` endpoint

### Hooper

Version: 0.1.1582310744 (5ba1479) (EL7, OmniOS)

Version: 0.1.1582310744 (04c5fae) (EL6)

* Add `Fault::hosts` config token to `circonus.conf` for web and script usage.
* Configure jlog save directory for stratcon raw ingestor. Will not be used in
  most Inside deployments.
* Relocate `faultd` configuration files to a subdirectory of
  `/opt/circonus/etc` and load additional IRONdb client modules to enable
  tracking of check-level tags.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.11

* Pass the siginfo context into the stacktrace for self-diagnosis.
* Fix short HTTP/1 payload reads.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1581719449 (ee1a5d8)

* Allow metric-less filters.
* Fix tag search evaluation with empty tag values.

### Web UI/API

Version: 0.1.1582324336 (d6e68d6)

* Improvement: Added "Keyboard Shortcuts" link to user menu.
* Bugfix: Fixed the layout of advanced search builder modal inside of the
  utility modal, at certain window sizes.
* Bugfix: Fixed customizable dashboards so they respect the 1200px minimum
  width set on the page.
* Bugfix: When using the advanced query builder to populate a Metric Explorer
  search query, broker names containing commas now work properly.
* Bugfix: Creating a check_bundle would lose metric_filters when creating on
  more than one broker.
* Bugfix: Postgres replica check function gets incorrect ownership on initial
  Inside installs.
* Improvement: Added dashboard `state` widget.
* Bugfix: Minimum height set by dashboard API did not match UI.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)

## 2020-02-10

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200210/x86_64/`

### caql_broker

Version: 0.1.1580893408 (2274d22)

* No user-facing changes.

### data_storage

Related roles: caql_broker

Version: 0.1.1581090623 (947e2c9)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.  We
> plan to remove these deprecated functions soon for the SaaS site, and in the
> subsequent Inside release. This will affect CAQL checks as well as CAQL
> Datapoints on graphs. The UI will now show users a warning when one of the
> deprecated functions is used. Circonus offers a more powerful tag-search
> feature, exposed as `find()` in CAQL.

* CAQL: Add `integrate:while(`) function
* CAQL: Add `forecasting:auto()` method
* CAQL: Add broadcasting support to `forecasting:slope()/:regression()`

### fault_detection

Version (faultd): 0.1.1580504794 (ad15a94)

* Surface an existing statistic, `collected`, from each broker that faultd has
  seen metrics from. This metric is sourced from the `metrics_collected`
  statistic exposed by the broker's "selfcheck" module. It represents the total
  metric observations recorded by that broker, prior to filtering.

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.13.0

* Automatically load all available modules.
* FQ plugin modules are now in a subdirectory of `/opt/circonus/libexec`.

### GoAPI

Related roles: api, web_frontend

Version: 0.1.1579636255 (0b6b018)

* No changes since [2020-01-27](/circonus/on-premises/changelog/2020#2020-01-27)

### Hooper

Version: 0.1.1579804588 (178c6b6) (EL7, OmniOS)

Version: 0.1.1579804588 (0d6e5fe) (EL6)

* No changes since [2020-01-27](/circonus/on-premises/changelog/2020#2020-01-27)

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.10

* No changes since [2020-01-27](/circonus/on-premises/changelog/2020#2020-01-27)

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1580893408 (d1156f8)

* (Broker) Fix SNMP value type coercion.
* (Broker) Support 0.0.0.0 as a global target for statsd checks.
* Simplify MQ routing and make it hookable.

### Web UI/API

Version: 0.1.1581103420 (7b53748)

* Bugfix: rule_set_group API "unexpected error" with double-submission or
  duplicate key conflicts.
* Bugfix: PUT to rule_set_group API would always return an error.
* Bugfix: fix Postgres database scaffolding order to avoid an SQL error on
  initial Inside setup.
* Bugfix: graph datapoint.alpha property was inconsistently numeric or
  string-quoted in API output.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)

## 2020-01-27

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200127/x86_64/`

### caql_broker

Version: 0.1.1578942442 (1ff7ebb)

* No user-facing changes.

### data_storage

Related roles: caql_broker

Version: 0.1.1579718901 (3e406ed)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.
> We plan to remove these deprecated functions on 2020-01-31 for the SaaS site,
> and in the subsequent Inside release on 2020-02-10. This will affect
> CAQL checks as well as CAQL Datapoints on graphs. The UI will now show users
> a warning when one of the deprecated functions is used. Circonus offers a
> more powerful tag-search feature, exposed as `find()` in CAQL.

* CAQL: Add `histogram:ratio_above()` / `:ratio_below()` functions.
* CAQL: Fix a bug where `fill()` would not fill in missing data.
* CAQL: Improve `window:merge` performance.
* CAQL: Fix a bug where optimization rules were falsely applied.
* CAQL: Fix a bug where long-running queries could trigger watchdog timeouts.
* CAQL: Fix an issue where failed proxy attempts could cause `find()` errors
  even when `N-W+1` nodes were successfully interrogated.

### fault_detection

Version (faultd): 0.1.1578944874 (3e3ea63)

* No user-facing changes.

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.12.0

* No changes since [2019-08-12](/circonus/on-premises/changelog/2019#2019-08-12)

### GoAPI

Related roles: api, web_frontend

Version: 0.1.1579636255 (0b6b018)

* Fix: Results from IRONdb are not guaranteed to be in the order requested.
  Ensure that request labels match result labels before returning data to
  original requestor.
* Adds support for `activity` and `latest` query parameters for requests to
  metric search and metric lookup by ID. Also adds the corresponding new fields
  to the result data from `/metric` endpoint requests. The data returned in the
  new `activity` and `latest` fields uses the same JSON formats used by IRONdb.

### Hooper

Version: 0.1.1579804588 (178c6b6) (EL7, OmniOS)

Version: 0.1.1579804588 (0d6e5fe) (EL6)

* (API role) Template a previously hard-coded Apache config file that deals
  with HTTP request headers for direct browser-to-API requests. These requests
  are not yet extensively used.
* Add `DB::admin` user parameters to the `circonus.conf` file. This is
  currently used only by a script that gets run once during initial Inside
  deployment.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.10

* Move eventer SSL debug logging to `debug/eventer/ssl`.
* Fix use-after-free in http logging when HTTP/2 sessions are interrupted.
* Make the lua subsystem interrupt as it approaches a watchdog timeout.
* Fix compressed uploads in `rest_get_raw_upload`.
* `mtev_json_object` ref counting is now atomic.

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1578942442 (df23193)

* (Broker) Fix short reads of compressed httptrap submissions.

### Web UI/API

Version: 0.1.1580074212 (c5ecd76)

* Bugfix: `display_name` property was lost in Cloudwatch check creation via
  API.
* Bugfix: Ruleset Groups in the API could not reference a pattern-based
  ruleset.

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)

## 2020-01-13

[EL7 pinned
repo](/circonus/on-premises/installation/installation/#el7-repo):
`baseurl=http://updates.circonus.net/centos/7/release-20200113/x86_64/`

### caql_broker

Version: 0.1.1573917743 (1ff7ebb)

* No changes since [2019-12-16](/circonus/on-premises/changelog/2019#2019-12-16)

### data_storage

Related roles: caql_broker

Version: 0.1.1578416138 (6f32a35)

**Function Removal Notice**

> Metric Search v2 and Metric Clusters have been deprecated for some time.
> We plan to remove these deprecated functions on 2020-01-31 for the SaaS site,
> and in the subsequent Inside release on 2020-02-10. This will affect
> CAQL checks as well as CAQL Datapoints on graphs. The UI will now show users
> a warning when one of the deprecated functions is used. Circonus offers a
> more powerful tag-search feature, exposed as `find()` in CAQL.

* Support tag query filter for suppressing rollups from raw database.

### fault_detection

Version (faultd): 0.1.1578060087 (6829a12)

* Bug: text rule notifications lacked most recent value.
* Feature: expose triggering value in a rule stream's trigger history.

Version (ernie): 0.1.1544639627 (db11a23)

* No changes since [2018-12-31](/circonus/on-premises/changelog/2018#2018-12-31)

### FQ

Related roles: caql_broker, fault_detection, mq, stratcon, web_stream

Version: 0.12.0

* No changes since [2019-08-12](/circonus/on-premises/changelog/2019#2019-08-12)

### GoAPI

Related roles: api, web_frontend

Version: 0.1.1574368914 (d2bb13a)

* No changes since [2019-12-02](/circonus/on-premises/changelog/2019#2019-12-02)

### Hooper

Version: 0.1.1578599667 (71b7806) (EL7, OmniOS)

Version: 0.1.1578599667 (fd3a80f) (EL6)

* Always try to update PostgreSQL contrib module packages.
* Additional configuration checks for data_storage "ncopies" values.

### libmtev

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 1.9.8

* No changes since [2019-12-16](/circonus/on-premises/changelog/2019#2019-12-16)

### notification

Version: 0.1.1570571834 (00b2aa2)

* No changes since [2019-10-21](/circonus/on-premises/changelog/2019#2019-10-21)

### Reconnoiter

Related roles: broker, caql_broker, data_storage, fault_detection, stratcon, web_stream

Version: 0.1.1573917743 (d2eacec)

* No changes since [2019-12-02](/circonus/on-premises/changelog/2019#2019-12-02)

### Web UI/API

Version: 0.1.1578699304 (7e9e7fb)

* Updated module and schema for PostgresSQL-RabbitMQ communication (`pg_amqp`).

### web_stream

Version: 0.1.1566849557 (a3e7e11)

* No changes since [2019-09-09](/circonus/on-premises/changelog/2019#2019-09-09)
